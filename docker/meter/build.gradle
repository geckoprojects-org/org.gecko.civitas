/*
 * build Gradle build script
 */
import aQute.bnd.gradle.Export

task prepareDocker(){
	def stageDir = file('content')
	def runtimeDir = new File(stageDir, 'runtime')
	doFirst {
		stageDir.deleteDir()
    }
    doLast {
		println "Prepare Docker build"
		stageDir.mkdirs()
	     // copy all necessary files to  build/docker/ dir
    	copy {
	        from new File("../../org.civitas.meter.runtime/generated/distributions/executable/meter.runtime_docker.jar")
	        into stageDir
	        rename("meter.runtime_docker.jar", "org.civitas.meter.runtime.jar")
	    }
	    copy {
	        from new File("../../org.civitas.meter.runtime/runtime/")
	        into new File(stageDir, "runtime")
	    }
    }
}
